<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Epsych by dstolz</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Epsych</h1>
		
        <p class="view"><a href="https://github.com/dstolz/epsych">View the Project on GitHub <small>dstolz/epsych</small></a></p>


        <ul>
          <li><a href="https://github.com/dstolz/epsych/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/dstolz/epsych/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/dstolz/epsych">View On <strong>GitHub</strong></a></li>
        </ul>

      </header>
      <section>
        <p>Note: This manual is a work in progress!</p>
        
        Overview
		<ul>
			<li><a href = "./index.html">Introduction</a></li>
			<li><a href = "./Getting_Started.html">Getting Started</a></li>
			<li><a href = "./Setting_up_Matlab.html">Setting up EPsych in Matlab</a></li>
			<li><a href = "./Designing_Behavioral_Experiment.html">Designing a Behavioral Experiment</a></li>
			<li><a href = "./EPsych_Macros_for_RPvds_Cicuits.html">EPsych Macros for RPvds Circuits</a></li>
		</ul>
		GUIs
		<ul>
			<li><a href = "./ep_LaunchPad_GUI.html">ep_LaunchPad</a></li>
			<li><a href = "./ep_ExperimentDesign.html">ep_ExperimentDesign</a></li>
			<li><a href = "./ep_BitmaskGen.html">ep_BitmaskGen</li>
			<li><a href = "./ep_RunExpt.html">ep_RunExpt</a></li>
			<li><a href = "./ep_EPhys.html">ep_EPhys</a></li>
		</ul>
		<h1>ep_ExperimentDesign GUI</h1>
		<p>
		This GUI generates the parameters for variables defined in the RPvds circuit. Display this GUI by typing <code>>> ep_ExperimentDesign</code> in the Matlab command window.</p>
		<p>
		This GUI allows you to define how RPvds parameters (such as frequency, amplitude, duration, etc.) are updated on a 'trial-by-trial' basis.  
		In a behavior experiment (with or without electrophysiology; <code>ep_RunExpt</code>), we define 'trial' as a single measurement of the subjects response to some stimulus .  
		In an electrophysiology experiment (typically anaesthetised or passive recordings; <code>ep_EPhys</code>), we define 'trial' as a single presentation of some stimulus.
		</p>
		<p>
		The basic strategy for generating the experiment using this GUI is to:
			<ol>
				<li>Define which TDT hardware modules are in use</li>
				<li>Enter parameter tag names from an RPvds circuit (or read parameter names directly from the file)</li>
				<li>Specify the function of each parameter before/after each trial (read, write, or both read/write)</li>
				<li>Enter one or more values (can be any Matlab expression, including function names) for all 'write' or 'read/write' parameters</li>
				<li>Optionally select a calibration file corresponding to one or multiple parameters</li>
				<li>If running a behavioral experiment with more than one subject simultaneously (i.e. multiple behavioral boxes), then create an experiment design for each subject, or duplicate the experiment design for each subject (see the 'Parameter Tag Modifiers' section below)</li>
			</ol>
		</p>
		<p>
			<img src="https://github.com/dstolz/epsych/raw/master/.manual/GUIpics/ep_ExperimentMaker.png" alt="ep_LaunchPad GUI">
		</p>
		<p>
			<h2>1. Define Hardware Modules</h2>
			<p>
				The first step in designing an experiment is to determine which TDT hardware modules will be running circuits that need to be updated on a trial-by-trial basis.  
				This hardware may be an RX6 module if high-frequency sampling rates are required to produce ultrasonic sounds, or an RX8 module if an array of speakers are required for a sound localization experiment, etc.  
				RPvds circuits should be created first and designed to meet the specific needs of the experiment.
				Once the RPvds circuits are created (they can be modified and refined later), add all modules to the <code>ep_ExpeirmentMaker</code> GUI by clicking the <b>+</b> sign.  
				<br><br>
				
				If making a new experiment design, a prompt will appear asking whether the TDT OpenEx software.  
				Typically, the OpenEx software is used in conjunction with electrophysiology experiments, with or without behavior.  
				OpenEx can be used with behavior alone, however, this tends to increase the complexity and time spent on setup.   
				<br><br>
				
				Next, a prompt will appear requesting an alias (a name) for the hardware module.  
				If using OpenEx the module alias needs to be the same as the name used in the OpenWorkbench; otherwise, the alias is aribtrary, but required.
				<br><br>
				
				<H3>When Using OpenEx...</H3>
				After specifying the module alias, a prompt will appear asking if you would like to read the parameter tags directly from an RPvds circuit file.
				If selecting yes (recommended), you will be prompted to locate an RPvds file.  The software will then try to read all relevant parameter tags that exist in the selected RPvds file.
				<br><br>
				
				<H3>When Not Using OpenEx...</H3>
				After specifying the module alias, prompts will appear requesting you to select the TDT hardware module type (RX6, RZ6, RX8, etc.) as well as the module index.  
				The module index allows you to address individual modules of the same type on your rig.  
				Most often, the module index will be '1', but if you have multiple RX6 modules, for example, then you can specify which of the RX6 modules the circuit will be running on.
				<br><br>
				
				Finally, you will be prompted to locate an RPvds circuit file (*.rcx) that will be associated with this module.
				<br><br>
				
				The module type, alias, and RPvds file can be updated at any time by clicking the menu item: Protocol > Update Module
				
			</p>
		</p>
		<p>
			<h2>2. Parameter Tags</h2>
			<p>
				Each row of the parameter table identifies the parameter tags that you would like updated in the RPvds circuit file on a 'trial-by-trial' basis.
				The 'Tag' column of the parameter table is the name of the parameter tags within the circuit.  
				This field is case sensitive and should not contain any spaces.
				A find-and-replace search function is included in the menu: Protocol > FindReplace (ctrl+F)
				All tags named here should be located within the circuit (with the exception of the asterisk prefix flag discussed below).
				<h3>Parameter Tag Modifiers</h3>
				<ul>
					<li>
						<b>*ParameterName</b><br>
						If you would like to include parameters for use in custom 'Trial Selection functions' (discussed later in its own section), 
						then you can add an asterisk (<b>*</b>) before the tag name. For example: <code>*ParameterName</code>. 
						The software will ignore any parameter tags starting with an asterisk and will not attempt to update them before each trial begins.
						You can still update parameters beginning with an askerisk in your custom functions if you need to.
					</li>
					<li>
						<b>$ParameterName</b><br>
						The dollar sign prefix modifier will create a prompt each time you run the experiment to manually specify the value of that parameter.  
						You can set default values in the <b>Values</b> column.
					</li>
					<li>
						<b>ParameterName~#</b><br>
						Although the tilde-number scheme is not actually identified by the software, it is common to use this to control a specific behavioral box on setups that run more than one box simultaneously from the same computer.
						For example, you can refer to the first behavior box with 'ParameterName~1', the second as 'ParameterName~2', etc.
						This flag can be combined with any of the prefix modifiers.<br>
						Tip: If running more than one subject at a time (i.e. multiple behavioral boxes), then use the <b>~#</b> suffix to identify which parameters correspond to which subject.
						Each subject gets its own experiment protocol file, you may simply create a file for the first subject, for example 'ParameterName~1', and then use the Find & Replace function (ctrl+F) to 
						search for <b>~1</b> and replace with <b>~2</b>.
					</li>
				</ul> 
				
			</p>
		</p>
		<p>
			<h2>3. Parameter Function</h2>
			<p>
				The parameter function column defines how EPsych should interact with the parameters on a trial-by-trial basis.  
				There are three options for this field: <b>read</b>, <b>write</b>, <b>read/write</b>
				<ul>
					<li><b>read</b> indicates the parameter should be read and stored into a file after each trial is complete.  This file can can be saved and analyzed.</li>
					<li><b>write</b> indicates the parameter should be updated with a new value before each trial begins.</li>
					<li><b>read/write</b> indicates the parameter should be both updated with a new value before each trial begins and that value should be read after the trial is complete.</li>
				</ul>
				Typically, most parameters use the <b>read/write</b> function if something has been entered into the <b>Values</b> field.  
				If, however, you need to record a value that is generated by the experimental paradigm during runtime (ex: some randomized value or response latency), then you would typically choose <b>read</b> for that parameter.  
				If you are just updating some value and don't care to include it in your data file, then you may choose <b>write</b>.
			</p>
		</p>
		<p>
			<h2>4. Parameter Values</h2>
			<p>
				The <b>Values</b> column in the parameter table defines what numerical values will be passed for each parameter during an experiment before each trial.  
				If you enter something in this field, then you will use the <b>write</b> or <b>read/write</b> parameter function.  
				If you leave this field empty, then you must select the <b>read</b> function.
				<br><br>
				
				The <b>Values</b> field will accept one or more numerical values, such as <code>123</code> for a scalar value or <code>[1, 2, 3]</code> for an array.  
				In practice, you may enter any Matlab command that returns a scalar value or a 1xN numerical array.  
				This allows you to use syntax like:
				<ul>
					<li><code>1:5</code> <i>evaluates to</i> <code>[1, 2, 3, 4, 5]</code></li>
					<li><code>1:3:9</code> <i>evaluates to</i> <code>[1, 3, 9]</code></li>
					<li><code>logspace(1,3,5)</code> <i>evaluates to</i> <code>[10.0000, 17.7828, 31.6228, 56.2341, 100.0000]</code></li>
					<li><code>rand(1,5)</code> <i>evaluates to</i> <code>[0.0855, 0.2625, 0.8010, 0.0292, 0.9289]</code>, <i>or 5 values chosen randomly from a uniform distribution</i></li>
					<li><code>5+rand(1,5)</code> <i>evaluates to</i> <code>[5.0855, 5.2625, 5.8010, 5.0292, 5.9289]</code></li>
					<li><code>MyFavoriteFunction(1234)</code> <i>evaluates to whatever you would like, as long as it returns a 1xN numerical array</i></li>
				</ul>
				
				The values you enter for each parameter are entirely up to you and your specific experiment design.  
				As you update your parameter values, you should see an indicator on the left change color to red if something isn't right with the values you've entered.
				The protocol will not run properly if this indicator is red.  Adjust your values until it is green.
				Once you've entered the values for all parameters you wish to be updated before each trial and the indicator on the left panel is green, then click the <b>View Compiled</b> button.  
				This will compile the parameters, their values and options, and display a table in a new figure with a rundown of unique trials that will be selected from during the experiment.
				
			</p>
		</p>
		<p>
			<h2>5. Buddy Parameters</h2>
			<p>
				It is often useful to tie the values of two or more parameters together.  
				This feature is especially useful when running experiments using multiple hardware modules.  
				The values of parameters can be tied together by clicking the dropdown box and selecting <b>< ADD ></b>.  
				Enter a meaningful name in the input box and click OK.  The name is arbitrary, but should be something meaningful to you.  
				This will create a new item with the entered name in all Buddy drop down boxes.  
				Select this new Buddy for additional parameters on the same module or across modules.  
				The values of buddied-up parameters will be tied together so that the first number in all buddied parameters will be locked together; the second number in all budied parameters will be locked, etc.  
				You can create as many Buddy parameters as needed.
			</p>
		</p>
		<p>
			<h2>6. Options Panel</h2>
			<p>
				<ul>
					<li><b>Randomize</b>: </li>
					<li><b>Operational Trigger</b>: </li>
					<li><b># Reps</b>: </li>
					<li><b>ITI</b>: </li>
				</ul>
			</p>
		</p>
		<p>
			<h2>7. Trial Select Function</h2>
			<p>
				
			</p>
		</p>
		<p>
			<h2>8 Calibration Files</h2>
			<p>
				
			</p>
		</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/dstolz">dstolz</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63280308-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
